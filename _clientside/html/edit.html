<!-- need to fix architecture -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
    <script src="../js/vertxbus-2.1.js"></script>
    <link rel="stylesheet" href="../css/edit.css">
</head>
<body>
    <!-- header need to same which in Main.html -->
    <header>
        <div id="usr">
            <div class="uname">
                <div class="welcome">"Welcome name!!"</div>
                <div class="button">
                    <a href="../src/info" ><img src="../src/info.png" class="info"></a>
                    <a href="Main2.html" ><img src="../src/Out.png" class="out"></a>
                </div>
            </div>
            <div class="logo"><a href="Main.html"><img src="../src/Logo.png" width = 400px;></a></div>
            <div id="isucnt"></div>
        </div>
    </header>
    <section>
        <button onclick="sendText()">sss</button>
        <div id=section>
            <div id="Title" contentEditable="true">Make Title Please!!</div>
            <!-- edit page -->
            <div id="docs" contentEditable="true">설명</div>
        </div>
    </section>

    <!-- footer need to same which in Main.html -->
    <footer>

    </footer>

    <script>
    function sendText(){
        var docs = document.getElementById("docs");
        var title = document.getElementById("Title");
        var tx = docs.innerHTML;
        var tl = title.innerHTML;
        publish('ctos.text', tl, tx);
    }

    var eb = new vertx.EventBus("https://localhost/eventbus");

    eb.onopen = function() {};
    eb.onclose = function() {
        eb = null;
    };


    function subscribe(address) {
        if (eb) {
            eb.registerHandler(address, function(msg, replyTo) {
            });
        }
    }

    function publish(address, tl, tx) {
        console.log("publish----------------");
        if (eb) {
            var json = {"title": tl,"text": tx};
            eb.publish(address, json);
        }
    }
    </script>
</body>
</html>
